<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ ‡§®‡§æ‡§Æ ‡§ú‡§™</title>
    <!-- now we add the logo of this page -->
    <link rel="icon" href="tilak_logo.jpg" type="image/jpg">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2451072605243519"
     crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9933 0%, #ffffff 50%, #138808 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #ff6600;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat {
            background: linear-gradient(135deg, #ff6600, #ff9933);
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-width: 120px;
        }

        .stat span {
            display: block;
            font-size: 1.5em;
            margin-top: 5px;
            transition: all 0.3s ease;
        }

        /* Ripple Effect */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: ripple-animation 0.6s ease-out;
            pointer-events: none;
        }

        @keyframes ripple-animation {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Auto-generation Visual Feedback */
        .stat.auto-generating {
            animation: autoGenPulse 0.5s ease-out;
        }

        @keyframes autoGenPulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 25px rgba(19, 136, 8, 0.5);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }
        }

        .stat span.auto-updating {
            animation: numberGlow 0.5s ease-out;
        }

        @keyframes numberGlow {
            0%, 100% {
                color: white;
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            }
            50% {
                color: #ffeb3b;
                text-shadow: 0 0 15px rgba(255, 235, 59, 0.8), 0 0 25px rgba(19, 136, 8, 0.6);
            }
        }

        /* Auto-generation indicator */
        .auto-gen-indicator {
            position: fixed;
            pointer-events: none;
            z-index: 998;
            font-size: 1.2em;
            font-weight: bold;
            color: #138808;
            animation: autoGenFloat 1.5s ease-out forwards;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
        }

        @keyframes autoGenFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-80px) scale(0.8);
            }
        }

        /* Shimmer effect for background during auto-generation */
        .clicker-section.auto-gen-active {
            position: relative;
        }

        .clicker-section.auto-gen-active::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            animation: shimmer 1.5s ease-in-out;
        }

        @keyframes shimmer {
            0% {
                left: -100%;
            }
            100% {
                left: 100%;
            }
        }

        .audio-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
            flex-wrap: wrap;
            max-width: calc(100vw - 40px);
            justify-content: flex-end;
        }

        .audio-btn {
            background: linear-gradient(135deg, #ff6600, #ff9933);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            font-size: 1em;
            white-space: nowrap;
        }

        .audio-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .audio-btn:active {
            transform: translateY(0);
        }

        .audio-btn.muted {
            background: linear-gradient(135deg, #888, #aaa);
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            margin-bottom: 20px;
        }

        .clicker-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        #hanuman-btn {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            border: 5px solid #ff6600;
            color:white;
            background: linear-gradient(135deg, #ff9933, #ffcc00);
            font-size: 4em;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 10px 40px rgba(255, 102, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            position: relative;
            overflow: hidden;
        }

        #hanuman-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 50px rgba(255, 102, 0, 0.6);
        }

        #hanuman-btn:active {
            transform: scale(0.95);
        }

        .floating-text {
            position: fixed;
            font-size: 2em;
            font-weight: bold;
            color: #000000;
            pointer-events: none;
            animation: float-up 1s ease-out forwards;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            z-index: 999;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Custom Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: linear-gradient(135deg, #fff, #ffe6cc);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
            border: 3px solid #ff6600;
        }

        @keyframes modalSlideIn {
            from {
                transform: scale(0.8) translateY(-50px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .modal h3 {
            color: #ff6600;
            font-size: 1.8em;
            margin-bottom: 15px;
            text-align: center;
        }

        .modal p {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 25px;
            text-align: center;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .modal-btn.confirm {
            background: linear-gradient(135deg, #dc3545, #ff6b6b);
            color: white;
        }

        .modal-btn.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
        }

        .modal-btn.cancel {
            background: linear-gradient(135deg, #ff6600, #ff9933);
            color: white;
        }

        .modal-btn.cancel:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 102, 0, 0.4);
        }

        /* Particle Effects */
        .particle {
            position: fixed;
            pointer-events: none;
            z-index: 998;
            font-size: 1.5em;
            animation: particleFloat 1.5s ease-out forwards;
        }

        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0.3) rotate(var(--rot));
            }
        }

        /* Pulse Animation for Affordable Upgrades */
        .upgrade.affordable {
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(255, 102, 0, 0.4);
                border-color: #ff9933;
            }
            50% {
                box-shadow: 0 0 20px 5px rgba(255, 102, 0, 0.6);
                border-color: #ff6600;
            }
        }

        /* Success Notification */
        .success-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #138808, #4CAF50);
            color: white;
            padding: 25px 40px;
            border-radius: 15px;
            font-weight: bold;
            z-index: 2001;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: successPop 0.5s ease-out;
            font-size: 1.2em;
            text-align: center;
        }

        @keyframes successPop {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .upgrades-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            max-height: 600px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .upgrades-section h2 {
            color: #ff6600;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8em;
        }

        .upgrade {
            background: linear-gradient(135deg, #fff, #ffe6cc);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            border: 2px solid #ff9933;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upgrade:hover:not(.disabled) {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(255, 102, 0, 0.3);
        }

        .upgrade.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .upgrade-name {
            font-weight: bold;
            color: #ff6600;
            font-size: 1.1em;
            flex: 1;
            min-width: 120px;
        }

        .upgrade-cost {
            background: #ff6600;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            white-space: nowrap;
            font-size: 0.9em;
        }

        .upgrade-desc {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .upgrade-owned {
            color: #138808;
            font-weight: bold;
            font-size: 0.9em;
        }

        .achievements {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .achievements h2 {
            color: #ff6600;
            margin-bottom: 15px;
            text-align: center;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .achievement {
            background: linear-gradient(135deg, #fff, #ffe6cc);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #ddd;
        }

        .achievement.unlocked {
            border-color: #138808;
            box-shadow: 0 0 20px rgba(19, 136, 8, 0.3);
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .achievement-name {
            font-weight: bold;
            color: #ff6600;
            font-size: 0.9em;
        }

        @media (max-width: 1024px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            header {
                padding: 15px;
                margin-bottom: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .stats {
                gap: 10px;
                margin-top: 10px;
            }

            .stat {
                padding: 10px 15px;
                min-width: 100px;
                flex: 1;
            }

            .stat span {
                font-size: 1.2em;
            }

            .audio-controls {
                top: 10px;
                right: 10px;
                gap: 5px;
            }

            .audio-btn {
                padding: 8px 12px;
                font-size: 0.85em;
            }

            .clicker-section {
                padding: 20px 15px;
            }

            #hanuman-btn {
                width: 200px;
                height: 200px;
                font-size: 3em;
                margin: 15px auto;
            }

            .upgrades-section {
                padding: 15px;
                max-height: 500px;
            }

            .upgrades-section h2 {
                font-size: 1.5em;
                margin-bottom: 15px;
            }

            .upgrade {
                padding: 12px;
                margin-bottom: 12px;
            }

            .upgrade-name {
                font-size: 1em;
            }

            .upgrade-cost {
                font-size: 0.85em;
                padding: 4px 10px;
            }

            .achievements {
                padding: 15px;
                margin-top: 15px;
            }

            .achievements h2 {
                font-size: 1.5em;
                margin-bottom: 12px;
            }

            .achievement-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 10px;
            }

            .achievement {
                padding: 12px;
            }

            .achievement-icon {
                font-size: 1.5em;
            }

            .achievement-name {
                font-size: 0.8em;
            }

            .floating-text {
                font-size: 1.5em;
            }

            .auto-gen-indicator {
                font-size: 1em;
            }

            .modal {
                padding: 20px;
            }

            .modal h3 {
                font-size: 1.5em;
            }

            .modal p {
                font-size: 1em;
            }

            .modal-btn {
                padding: 10px 20px;
                font-size: 0.9em;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 8px;
            }

            h1 {
                font-size: 1.5em;
            }

            .stat {
                padding: 8px 12px;
                min-width: 90px;
            }

            .stat span {
                font-size: 1em;
            }

            .audio-controls {
                position: relative;
                top: 0;
                right: 0;
                justify-content: center;
                margin-bottom: 15px;
                width: 100%;
            }

            .audio-btn {
                flex: 1;
                min-width: 80px;
            }

            #hanuman-btn {
                width: 180px;
                height: 180px;
                font-size: 2.5em;
            }

            .clicker-section h2 {
                font-size: 1.2em;
                margin-bottom: 15px;
            }

            .clicker-section p {
                font-size: 1em;
            }

            .upgrades-section {
                max-height: 400px;
            }

            .achievement-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .floating-text {
                font-size: 1.2em;
            }

            .auto-gen-indicator {
                font-size: 0.9em;
            }
        }

        @media (max-width: 360px) {
            #hanuman-btn {
                width: 150px;
                height: 150px;
                font-size: 2em;
            }

            .stat {
                min-width: 80px;
                padding: 6px 10px;
            }

            .stat span {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="audio-controls">
            <button class="audio-btn" id="music-toggle">üéµ Music</button>
            <button class="audio-btn" id="sound-toggle">üîä Sound</button>
            <button class="audio-btn" id="reset-btn" style="background: linear-gradient(135deg, #dc3545, #ff6b6b);">üîÑ Reset</button>
        </div>

        <header>
            <h1>üïâÔ∏è ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ ‡§®‡§æ‡§Æ ‡§ú‡§™ üïâÔ∏è</h1>
            <div class="stats">
                <div class="stat">
                    <div>‡§∞‡§æ‡§Æ ‡§ß‡§®</div>
                    <span id="ram-count">0</span>
                </div>
                <div class="stat">
                    <div>‡§™‡•ç‡§∞‡§§‡§ø ‡§ï‡•ç‡§≤‡§ø‡§ï</div>
                    <span id="per-click">1</span>
                </div>
                <div class="stat">
                    <div>‡§™‡•ç‡§∞‡§§‡§ø ‡§∏‡•á‡§ï‡§Ç‡§°</div>
                    <span id="per-second">0</span>
                </div>
            </div>
        </header>

        <div class="game-area">
            <div class="clicker-section">
                <h2 style="color: #ff6600; margin-bottom: 20px;">‡§ú‡§Ø ‡§π‡§®‡•Å‡§Æ‡§æ‡§® ‡§ú‡•ç‡§û‡§æ‡§® ‡§ó‡•Å‡§£ ‡§∏‡§æ‡§ó‡§∞!</h2>
                <button id="hanuman-btn">‚Äú‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ‚Äù</button>
                <p style="color: #666; font-size: 1.2em; margin-top: 20px;">‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ ‡§ï‡•á ‡§â‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∞‡§æ‡§Æ ‡§®‡§æ‡§Æ ‡§ú‡§™‡•á‡§Ç! <br><h2 style="color: #ff6600;">‚Äú‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ‚Äù</h2><br></p>
            </div>

            <div class="upgrades-section">
                <h2>‚ö° ‡§â‡§®‡•ç‡§®‡§Ø‡§® (Upgrades) ‚ö°</h2>
                <div id="upgrades-list"></div>
            </div>
        </div>

        <div class="achievements">
            <h2>üèÜ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø‡§Ø‡§æ‡§Å (Achievements) üèÜ</h2>
            <div class="achievement-grid" id="achievements-grid"></div>
        </div>
    </div>

    <script>
        // Audio Setup
        let musicEnabled = true;
        let soundEnabled = true;
        let audioContext;
        let backgroundMusic;

        // Audio sample buffers
        let clickBuffer = null;
        let bellBuffers = [];

        // Initialize Audio Context
        async function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();

            // try to resume immediately (may still be suspended by autoplay policy)
            try { await audioContext.resume(); } catch (e) { /* ignore */ }

            if (audioContext.state === 'suspended') {
                // show a fallback Start Music button so user can start audio without using main clicker
                const btn = document.createElement('button');
                btn.id = 'music-start';
                btn.className = 'audio-btn';
                btn.textContent = '‚ñ∂Ô∏è Start Music';
                btn.addEventListener('click', async () => {
                    await audioContext.resume();
                    await createBackgroundMusic();
                    await loadClickSample();
                    btn.remove();
                }, { once: true });
                document.querySelector('.audio-controls').appendChild(btn);
            } else {
                // autoplay allowed ‚Äî load and start audio now
                await createBackgroundMusic();
                await loadClickSample();
            }
        }

        // Create background music by loading a recorded chant (looped)
        async function createBackgroundMusic() {
            try {
                const url = 'ram_ram.mp3'; // place your chant here
                const resp = await fetch(url);
                const ab = await resp.arrayBuffer();
                const audioBuffer = await audioContext.decodeAudioData(ab);

                const gainNode = audioContext.createGain();
                gainNode.gain.setValueAtTime(musicEnabled ? 0.5 : 0, audioContext.currentTime);

                const source = audioContext.createBufferSource();
                source.buffer = audioBuffer;
                source.loop = true;

                source.connect(gainNode);
                gainNode.connect(audioContext.destination);

                source.start();

                backgroundMusic = { source, gainNode };
            } catch (err) {
                console.error('Failed to load background audio:', err);
            }
        }

        // Load a short 'Ram' click sample for click sounds
        async function loadClickSample() {
            try {
                const url = 'assets/ram_click.mp3';
                const resp = await fetch(url);
                const ab = await resp.arrayBuffer();
                clickBuffer = await audioContext.decodeAudioData(ab);
            } catch (err) {
                console.warn('Failed to load click sample:', err);
                clickBuffer = null;
            }
        }

        // Load bell sound samples
        async function loadBellSamples(urls) {
            bellBuffers = [];
            for (const url of urls) {
                try {
                    const r = await fetch(url);
                    const ab = await r.arrayBuffer();
                    const buf = await audioContext.decodeAudioData(ab);
                    bellBuffers.push(buf);
                } catch (e) { console.warn('Bell load failed:', url, e); }
            }
        }

        // Play "Ram" sound effect (uses recorded sample if available)
        function playRamSound() {
            if (!soundEnabled || !audioContext) return;

            if (clickBuffer) {
                const s = audioContext.createBufferSource();
                const g = audioContext.createGain();
                s.buffer = clickBuffer;
                g.gain.setValueAtTime(0.9, audioContext.currentTime);
                s.connect(g);
                g.connect(audioContext.destination);
                s.start();
                return;
            }

            // Fallback if sample not loaded
            //const oscillator = audioContext.createOscillator();
            //const gainNode = audioContext.createGain();

            //oscillator.type = 'sine';
            //oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5

            //gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            //gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

            //oscillator.connect(gainNode);
            //gainNode.connect(audioContext.destination);

            //oscillator.start(audioContext.currentTime);
            //oscillator.stop(audioContext.currentTime + 0.2);

            const oscillator = audioContext.createOscillator();
    const oscillator2 = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    
    // Triangle wave for metallic bell sound
    oscillator.type = 'triangle';
    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
    
    // Second oscillator for richer harmonics
    oscillator2.type = 'sine';
    oscillator2.frequency.setValueAtTime(400, audioContext.currentTime);
    
    // Bell-like decay
    gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.7);
    
    oscillator.connect(gainNode);
    oscillator2.connect(gainNode);
    gainNode.connect(audioContext.destination);
    
    oscillator.start(audioContext.currentTime);
    oscillator2.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.5);
    oscillator2.stop(audioContext.currentTime + 0.5);

        }

        // Play bell sound with random pitch and volume
        function playBell() {
            if (!soundEnabled || !audioContext) return;
            if (bellBuffers.length === 0) { playRamSound(); return; }
            const buf = bellBuffers[Math.floor(Math.random() * bellBuffers.length)];
            const src = audioContext.createBufferSource();
            const gain = audioContext.createGain();
            src.buffer = buf;
            // small random volume and pitch for natural feel
            gain.gain.setValueAtTime(0.7 + Math.random() * 0.4, audioContext.currentTime);
            src.playbackRate.setValueAtTime(0.95 + Math.random() * 0.1, audioContext.currentTime);
            src.connect(gain);
            gain.connect(audioContext.destination);
            src.start();
        }

        // Toggle music
        document.getElementById('music-toggle').addEventListener('click', function() {
            musicEnabled = !musicEnabled;
            if (backgroundMusic) {
                backgroundMusic.gainNode.gain.setValueAtTime(
                    musicEnabled ? 0.05 : 0, 
                    audioContext.currentTime
                );
            }
            this.classList.toggle('muted', !musicEnabled);
            this.textContent = musicEnabled ? 'üéµ ‡§∏‡§Ç‡§ó‡•Ä‡§§' : 'üîá ‡§∏‡§Ç‡§ó‡•Ä‡§§';
        });

        // Toggle sound effects
        document.getElementById('sound-toggle').addEventListener('click', function() {
            soundEnabled = !soundEnabled;
            this.classList.toggle('muted', !soundEnabled);
            this.textContent = soundEnabled ? 'üîä ‡§ß‡•ç‡§µ‡§®‡§ø' : 'üîá ‡§ß‡•ç‡§µ‡§®‡§ø';
        });

        // Reset game with custom modal
        function resetGame() {
            showResetModal();
        }

        function showResetModal() {
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay';
            overlay.innerHTML = `
                <div class="modal">
                    <h3>üîÑ ‡§ñ‡•á‡§≤ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</h3>
                    <p>‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ñ‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?<br>‡§Ø‡§π ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§™‡•Ç‡§∞‡•ç‡§µ‡§µ‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä‡•§</p>
                    <div class="modal-buttons">
                        <button class="modal-btn confirm" id="confirm-reset-btn">‡§π‡§æ‡§Å, ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
                        <button class="modal-btn cancel" id="cancel-reset-btn">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>
            `;
            document.body.appendChild(overlay);
            
            // Add event listeners
            document.getElementById('confirm-reset-btn').addEventListener('click', confirmReset);
            document.getElementById('cancel-reset-btn').addEventListener('click', closeResetModal);
            
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    closeResetModal();
                }
            });
        }

        function closeResetModal() {
            const overlay = document.querySelector('.modal-overlay');
            if (overlay) {
                overlay.remove();
            }
        }

        function confirmReset() {
            localStorage.removeItem('hanumanClicker');
            ramCount = 0;
            clickPower = 1;
            ramsPerSecond = 0;
            totalClicks = 0;
            totalUpgrades = 0;
            upgrades.forEach(u => u.owned = 0);
            achievements.forEach(a => a.unlocked = false);
            updateDisplay();
            renderAchievements();
            closeResetModal();
            showSuccessNotification('‡§ñ‡•á‡§≤ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à!');
        }

        function showSuccessNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'success-notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }

        document.getElementById('reset-btn').addEventListener('click', resetGame);

        // Game State
        let ramCount = 0;
        let clickPower = 1;
        let ramsPerSecond = 0;

        const upgrades = [
            { id: 'mala', name: '‡§Æ‡§æ‡§≤‡§æ (Mala)', desc: '+1 ‡§™‡•ç‡§∞‡§§‡§ø ‡§ï‡•ç‡§≤‡§ø‡§ï', baseCost: 100, owned: 0, isClickPower: true, clickBonus: 1 },
            { id: 'bell', name: '‡§ò‡§Ç‡§ü‡•Ä (Bell)', desc: '+1 ‡§∞‡§æ‡§Æ/‡§∏‡•á‡§ï‡§Ç‡§°', baseCost: 400, owned: 0, production: 1 },
            { id: 'temple', name: '‡§Æ‡§Ç‡§¶‡§ø‡§∞ (Temple)', desc: '+5 ‡§∞‡§æ‡§Æ/‡§∏‡•á‡§ï‡§Ç‡§°', baseCost: 2000, owned: 0, production: 5 },
            { id: 'ashram', name: '‡§Ü‡§∂‡•ç‡§∞‡§Æ (Ashram)', desc: '+10 ‡§∞‡§æ‡§Æ/‡§∏‡•á‡§ï‡§Ç‡§°', baseCost: 7000, owned: 0, production: 10 }, 
            { id: 'mountain', name: '‡§∏‡§Ç‡§ú‡•Ä‡§µ‡§®‡•Ä ‡§™‡§∞‡•ç‡§µ‡§§', desc: '+100 ‡§∞‡§æ‡§Æ/‡§∏‡•á‡§ï‡§Ç‡§°', baseCost: 17000, owned: 0, production: 100 },
            { id: 'strength', name: '‡§¨‡§≤ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø', desc: '2x ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§™‡§æ‡§µ‡§∞', baseCost: 5000, owned: 0, isMultiplier: true, multiplier: 2 },
            { id: 'devotion', name: '‡§≠‡§ï‡•ç‡§§‡§ø ‡§∂‡§ï‡•ç‡§§‡§ø', desc: '3x ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§™‡§æ‡§µ‡§∞', baseCost: 20000, owned: 0, isMultiplier: true, multiplier: 3 }
        ];

        const achievements = [
            { id: 'first', name: '‡§™‡§π‡§≤‡§æ ‡§ï‡§¶‡§Æ', desc: '1 ‡§∞‡§æ‡§Æ', icon: 'üôè', threshold: 1, unlocked: false },
            { id: 'hundred', name: '‡§∂‡§§ ‡§∞‡§æ‡§Æ', desc: '100 ‡§∞‡§æ‡§Æ', icon: 'üìø', threshold: 100, unlocked: false },
            { id: 'thousand', name: '‡§∏‡§π‡§∏‡•ç‡§§‡•ç‡§∞ ‡§∞‡§æ‡§Æ', desc: '1000 ‡§∞‡§æ‡§Æ', icon: 'üî±', threshold: 1000, unlocked: false },
            { id: 'devotee', name: '‡§≠‡§ï‡•ç‡§§', desc: '5000 ‡§∞‡§æ‡§Æ', icon: 'üïâÔ∏è', threshold: 5000, unlocked: false },
            { id: 'master', name: '‡§Æ‡§π‡§æ‡§≠‡§ï‡•ç‡§§', desc: '10000 ‡§∞‡§æ‡§Æ', icon: '‚ö°', threshold: 10000, unlocked: false },
            { id: 'clicker', name: '‡§ï‡•ç‡§≤‡§ø‡§ï‡§∞', desc: '100 ‡§ï‡•ç‡§≤‡§ø‡§ï', icon: 'üëÜ', threshold: 100, type: 'clicks', unlocked: false },
            { id: 'buyer', name: '‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞', desc: '10 ‡§â‡§®‡•ç‡§®‡§Ø‡§®', icon: 'üõí', threshold: 10, type: 'upgrades', unlocked: false }
        ];

        let totalClicks = 0;
        let totalUpgrades = 0;

        // DOM Elements
        const ramCountEl = document.getElementById('ram-count');
        const perClickEl = document.getElementById('per-click');
        const perSecondEl = document.getElementById('per-second');
        const hanumanBtn = document.getElementById('hanuman-btn');
        const upgradesList = document.getElementById('upgrades-list');
        const achievementsGrid = document.getElementById('achievements-grid');

        // Initialize
        function init() {
            renderUpgrades();
            renderAchievements();
            loadGame();
            setInterval(autoGenerate, 1000);
            setInterval(saveGame, 5000);
        }

        // Click Handler - Support both mouse and touch
        let isProcessingClick = false;
        
        function handleClick(e) {
            // Prevent multiple triggers
            if (isProcessingClick) return;
            isProcessingClick = true;
            
            // Prevent default to avoid double-trigger on touch devices
            e.preventDefault();
            
            // Create ripple effect
            createRipple(e);
            
            const ramAdded = clickPower;
            ramCount += ramAdded;
            totalClicks++;
            updateDisplay();
            
            // Get position from touch or mouse event
            const x = (e.touches && e.touches[0] ? e.touches[0].clientX : e.clientX) || window.innerWidth / 2;
            const y = (e.touches && e.touches[0] ? e.touches[0].clientY : e.clientY) || window.innerHeight / 2;
            
            // Create visual effects - only once per click
            createFloatingText(x, y, ramAdded);
            createParticles(x, y);
            playRamSound(); // Only play once per click
            checkAchievements();
            
            // Reset flag after a short delay
            setTimeout(() => {
                isProcessingClick = false;
            }, 100);
        }

        function createRipple(e) {
            const button = hanumanBtn;
            const rect = button.getBoundingClientRect();
            
            // Get click position relative to button
            const x = (e.touches && e.touches[0] ? e.touches[0].clientX : e.clientX) - rect.left;
            const y = (e.touches && e.touches[0] ? e.touches[0].clientY : e.clientY) - rect.top;
            
            const ripple = document.createElement('span');
            ripple.className = 'ripple';
            
            const size = Math.max(rect.width, rect.height);
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (x - size / 2) + 'px';
            ripple.style.top = (y - size / 2) + 'px';
            
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        hanumanBtn.addEventListener('click', handleClick);
        hanumanBtn.addEventListener('touchstart', handleClick, { passive: false });

        function createFloatingText(x, y, amount) {
            const text = document.createElement('div');
            text.className = 'floating-text';
            text.textContent = "+" + formatNumber(amount) + ' ‡§∞‡§æ‡§Æ';
            text.style.left = x + 'px';
            text.style.top = y + 'px';
            document.body.appendChild(text);
            setTimeout(() => text.remove(), 1000);
        }

        function createParticles(x, y) {
            const particles = ['üïâÔ∏è', 'üôè', 'üìø', '‚ö°', 'üî±'];
            const particleCount = 5;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                
                // Random direction and rotation
                const angle = (Math.PI * 2 * i) / particleCount + Math.random() * 0.5;
                const distance = 50 + Math.random() * 50;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                const rot = Math.random() * 360;
                
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', ty + 'px');
                particle.style.setProperty('--rot', rot + 'deg');
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                document.body.appendChild(particle);
                setTimeout(() => particle.remove(), 1500);
            }
        }

        function buyUpgrade(upgrade) {
            const cost = Math.floor(upgrade.baseCost * Math.pow(2.15, upgrade.owned));
            if (ramCount >= cost) {
                ramCount -= cost;
                upgrade.owned++;
                totalUpgrades++;
                
                if (upgrade.isClickPower) {
                    clickPower += upgrade.clickBonus;
                } else if (upgrade.isMultiplier) {
                    clickPower *= upgrade.multiplier;
                } else {
                    ramsPerSecond += upgrade.production;
                }
                
                updateDisplay();
                renderUpgrades();
                checkAchievements();
            }
        }

        function renderUpgrades() {
            upgradesList.innerHTML = upgrades.map(upgrade => {
                const cost = Math.floor(upgrade.baseCost * Math.pow(2.15, upgrade.owned));
                const canBuy = ramCount >= cost;
                return `
                    <div class="upgrade ${canBuy ? 'affordable' : 'disabled'}" onclick="buyUpgrade(upgrades.find(u => u.id === '${upgrade.id}'))">
                        <div class="upgrade-header">
                            <div class="upgrade-name">${upgrade.name}</div>
                            <div class="upgrade-cost">${formatNumber(cost)} ‡§∞‡§æ‡§Æ ‡§ß‡§®</div>
                        </div>
                        <div class="upgrade-desc">${upgrade.desc}</div>
                        <div class="upgrade-owned">‡§∏‡•ç‡§µ‡§æ‡§Æ‡§ø‡§§‡•ç‡§µ: ${upgrade.owned}</div>
                    </div>
                `;
            }).join('');
        }

        function renderAchievements() {
            achievementsGrid.innerHTML = achievements.map(ach => `
                <div class="achievement ${ach.unlocked ? 'unlocked' : ''}">
                    <div class="achievement-icon">${ach.unlocked ? ach.icon : 'üîí'}</div>
                    <div class="achievement-name">${ach.name}</div>
                </div>
            `).join('');
        }

        function checkAchievements() {
            achievements.forEach(ach => {
                if (!ach.unlocked) {
                    const value = ach.type === 'clicks' ? totalClicks : 
                                  ach.type === 'upgrades' ? totalUpgrades : ramCount;
                    if (value >= ach.threshold) {
                        ach.unlocked = true;
                        showAchievementNotification(ach);
                    }
                }
            });
            renderAchievements();
        }

        function showAchievementNotification(ach) {
            const notification = document.createElement('div');
            const isMobile = window.innerWidth <= 768;
            notification.style.cssText = `
                position: fixed;
                top: ${isMobile ? '80px' : '20px'};
                right: ${isMobile ? '10px' : '20px'};
                left: ${isMobile ? '10px' : 'auto'};
                background: linear-gradient(135deg, #138808, #4CAF50);
                color: white;
                padding: ${isMobile ? '15px' : '20px'};
                border-radius: 10px;
                font-weight: bold;
                z-index: 1001;
                box-shadow: 0 5px 30px rgba(0,0,0,0.3);
                animation: slideIn 0.5s ease-out;
                font-size: ${isMobile ? '0.9em' : '1em'};
                text-align: center;
            `;
            notification.innerHTML = `${ach.icon} ‡§â‡§™‡§≤‡§¨‡•ç‡§ß‡§ø ‡§Ö‡§®‡§≤‡•â‡§ï: ${ach.name}`;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        function autoGenerate() {
            if (ramsPerSecond > 0) {
                const ramAdded = ramsPerSecond;
                ramCount += ramAdded;
                
                // Visual feedback for auto-generation
                showAutoGenFeedback(ramAdded);
                
                updateDisplay();
                checkAchievements();
            }
        }

        function showAutoGenFeedback(amount) {
            // Pulse effect on Ram Dhan stat
            const ramStat = ramCountEl.closest('.stat');
            const ramCountSpan = ramCountEl;
            
            if (ramStat && ramCountSpan) {
                ramStat.classList.add('auto-generating');
                ramCountSpan.classList.add('auto-updating');
                
                setTimeout(() => {
                    ramStat.classList.remove('auto-generating');
                    ramCountSpan.classList.remove('auto-updating');
                }, 500);
            }
            
            // Shimmer effect on clicker section
            const clickerSection = document.querySelector('.clicker-section');
            if (clickerSection) {
                clickerSection.classList.add('auto-gen-active');
                setTimeout(() => {
                    clickerSection.classList.remove('auto-gen-active');
                }, 1500);
            }
            
            // Floating indicator near Ram Dhan counter
            if (ramStat) {
                const ramStatRect = ramStat.getBoundingClientRect();
                const indicator = document.createElement('div');
                indicator.className = 'auto-gen-indicator';
                indicator.textContent = '+' + formatNumber(amount) + ' ‡§∞‡§æ‡§Æ/‡§∏‡•á‡§ï‡§Ç‡§°';
                indicator.style.left = (ramStatRect.left + ramStatRect.width / 2) + 'px';
                indicator.style.top = (ramStatRect.top + ramStatRect.height / 2) + 'px';
                document.body.appendChild(indicator);
                
                setTimeout(() => {
                    indicator.remove();
                }, 1500);
            }
        }

        function updateDisplay() {
            ramCountEl.textContent = formatNumber(Math.floor(ramCount));
            perClickEl.textContent = formatNumber(clickPower);
            perSecondEl.textContent = formatNumber(ramsPerSecond);
            renderUpgrades();
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(2) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        function saveGame() {
            const gameState = {
                ramCount,
                clickPower,
                ramsPerSecond,
                upgrades,
                achievements,
                totalClicks,
                totalUpgrades
            };
            localStorage.setItem('hanumanClicker', JSON.stringify(gameState));
        }

        function loadGame() {
            const saved = localStorage.getItem('hanumanClicker');
            if (saved) {
                const gameState = JSON.parse(saved);
                ramCount = gameState.ramCount || 0;
                totalClicks = gameState.totalClicks || 0;
                totalUpgrades = gameState.totalUpgrades || 0;
                
                if (gameState.upgrades) {
                    gameState.upgrades.forEach((savedUpgrade, index) => {
                        upgrades[index].owned = savedUpgrade.owned;
                    });
                }
                
                if (gameState.achievements) {
                    gameState.achievements.forEach((savedAch, index) => {
                        achievements[index].unlocked = savedAch.unlocked;
                    });
                }
                
                // Use saved values if available, otherwise recalculate
                if (gameState.clickPower !== undefined) {
                    clickPower = gameState.clickPower;
                } else {
                    // Recalculate from upgrades
                    clickPower = 1;
                    upgrades.forEach(upgrade => {
                        if (upgrade.isClickPower) {
                            clickPower += upgrade.clickBonus * upgrade.owned;
                        } else if (upgrade.isMultiplier) {
                            clickPower *= Math.pow(upgrade.multiplier, upgrade.owned);
                        }
                    });
                }
                
                if (gameState.ramsPerSecond !== undefined) {
                    ramsPerSecond = gameState.ramsPerSecond;
                } else {
                    // Recalculate from upgrades
                    ramsPerSecond = 0;
                    upgrades.forEach(upgrade => {
                        if (!upgrade.isClickPower && !upgrade.isMultiplier) {
                            ramsPerSecond += upgrade.production * upgrade.owned;
                        }
                    });
                }
                
                updateDisplay();
                renderAchievements();
            }
        }

        // Start the game
        document.addEventListener('DOMContentLoaded', function() {
            initAudio();
        });

        // Add click listener to resume AudioContext on any user interaction
        document.addEventListener('click', async function resumeAudioOnClick() {
            if (audioContext && audioContext.state === 'suspended') {
                await audioContext.resume();
                await createBackgroundMusic();
                await loadClickSample();
                console.log('AudioContext resumed and music started');
            }
            document.removeEventListener('click', resumeAudioOnClick);
        }, { once: true });

        init();
        document.addEventListener("contextmenu", function (e) {
            e.preventDefault();
            });

            document.addEventListener("keydown", function (e) {
            if (e.ctrlKey || e.metaKey) {
                e.preventDefault();
            }
            });
    </script>
</body>
</html>
